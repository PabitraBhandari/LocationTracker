<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:maps="clr-namespace:Microsoft.Maui.Controls.Maps;assembly=Microsoft.Maui.Controls.Maps"
    x:Class="LocationTracker.Views.MainPage"
    Title="Location Tracker">

    <Grid RowDefinitions="*,Auto">
        <Grid Grid.Row="0">
            <maps:Map x:Name="MapControl"
                      MapType="Street"
                      IsTrafficEnabled="False"
                      IsZoomEnabled="True"
                      IsScrollEnabled="True" />

            <VerticalStackLayout Padding="12" Spacing="6"
                                 HorizontalOptions="Start" VerticalOptions="Start">
                <Label Text="{Binding CountLabel}"
                       BackgroundColor="#66000000"
                       TextColor="White"
                       Padding="8,4"
                       FontAttributes="Bold" />
                <Label Text="{Binding TimestampLabel}"
                       BackgroundColor="#66000000"
                       TextColor="White"
                       Padding="8,4" />
            </VerticalStackLayout>

            <GraphicsView x:Name="HeatView"
                          Drawable="{Binding HeatDrawable}"
                          InputTransparent="True" />
        </Grid>

        <HorizontalStackLayout Grid.Row="1"
                               Padding="16,10"
                               Spacing="24"
                               HorizontalOptions="Center">
            <Button Text="Add Now" Command="{Binding AddNowCommand}" />
            <Button Text="{Binding AutoToggleText}" Command="{Binding ToggleAutoCommand}" />
            <Button Text="Refresh" Command="{Binding RefreshHeatCommand}" />
            <Button Text="Center on Last" Clicked="OnCenterOnLast"/>
        </HorizontalStackLayout>
    </Grid>
</ContentPage>